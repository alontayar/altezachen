<!-- AZ build: v1.0.1 — 2025-09-17 — mobile 10-up + tap overlay preview, bigger buttons, iOS phone detect off -->
<!doctype html>
<html lang="he" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="format-detection" content="telephone=no" />
<title>אלטע זאכן — Alte Zachen</title>
<meta name="theme-color" content="#ff0000" />
<meta name="az-build" content="v1.0.1" />

<!-- Fonts in ROOT -->
<link rel="preload" href="AlteZachen-Wide.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="AlteZachen-HalfWide.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="AlteZachen-Normal.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="AlteZachen-Random.woff2" as="font" type="font/woff2" crossorigin>

<style>
/* ===== FONTS ===== */
@font-face{font-family:"AlteZachen Normal";
  src:url("AlteZachen-Normal.woff2") format("woff2"),url("AlteZachen-Normal.woff") format("woff");
  font-weight:400;font-style:normal;font-display:swap}
@font-face{font-family:"AlteZachen HalfWide";
  src:url("AlteZachen-HalfWide.woff2") format("woff2"),url("AlteZachen-HalfWide.woff") format("woff");
  font-weight:400;font-style:normal;font-display:swap}
@font-face{font-family:"AlteZachen Wide";
  src:url("AlteZachen-Wide.woff2") format("woff2"),url("AlteZachen-Wide.woff") format("woff");
  font-weight:400;font-style:normal;font-display:swap}
@font-face{font-family:"AlteZachen Random";
  src:url("AlteZachen-Random.woff2") format("woff2"),url("AlteZachen-Random.woff") format("woff");
  font-weight:400;font-style:normal;font-display:swap}

/* ===== CORE ===== */
*{box-sizing:border-box}
html{scroll-behavior:smooth}
body{
  margin:0;background:#fff;color:#000;
  font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans",Arial;
  line-height:1.2;text-align:center
}
a{color:inherit;text-decoration:none}
.section{ padding:80px 16px }
.section.white{ background:#fff; color:#000 }
.section.red{ background:#ff0000; color:#fff }

/* HERO */
.hero{ min-height:120vh; display:flex; align-items:center; justify-content:center }
.wrap{ max-width:1320px; margin:0 auto }
.huge{ font-size:12vw; line-height:.88; margin:0 }
.big { font-size:9vw;  line-height:.9;  margin:.06em 0 }
.mid { font-size:6vw;  line-height:.96; margin:.1em 0 }
@media (min-width:1200px){ .huge{font-size:160px} .big{font-size:170px} .mid{font-size:86px} }
.weight{ font-size:24px; font-weight:700; margin-bottom:8px }
@media (max-width:600px){ .weight{ font-size:18px; margin-bottom:4px } } /* כותרת משקל קטנה יותר במובייל */
.section.spec{ padding-top:56px; padding-bottom:56px }

/* HEADER */
.site-head{
  position:fixed; top:0; left:0; right:0; z-index:50;
  background:#fff; border-bottom:1px solid #000;
  transform:translateY(-110%); transition:transform .35s ease;
}
.site-head.show{ transform:translateY(0) }
.head-wrap{ max-width:1120px; margin:0 auto; display:flex; justify-content:center; gap:16px; padding:12px }
.btn{
  appearance:none; border:1px solid #000; background:#fff; color:#000;
  padding:.65em 1.4em; font-weight:700; cursor:pointer;
  font-family:"AlteZachen Normal",system-ui; font-size:18px
}
.btn:hover{ background:#000; color:#fff }
@media (min-width:1024px){ .btn{ font-size:22px; padding:.7em 1.6em } }

/* ===== GLYPH GRID: FLEX (לא חופף) ===== */
.glyphs-shell{ padding-left:6vw; padding-right:6vw }
.glyphs-wrap{ display:flex; gap:16px; align-items:flex-start; direction:ltr; }
.preview-col{ flex:0 0 38%; max-width:700px; min-width:300px; position:sticky; top:16px }
.grid-col{ flex:1 1 auto; min-width:320px }

.preview-box{
  width:100%; height:0; padding-bottom:100%;
  border:1px solid #000; background:#fff; position:relative; overflow:hidden
}
.preview-glyph{
  position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
  color:#ff0000; font-family:"AlteZachen Normal","AlteZachen Wide",system-ui;
  line-height:1; text-align:center; font-size:30vw; max-font-size:600px; transform:translateY(4%);
}
@media (min-width:1400px){ .preview-glyph{ font-size:600px } }
.preview-meta{ display:flex; justify-content:space-between; align-items:center; margin-top:8px;
  font:13px/1.2 Arial,Helvetica,sans-serif; color:#000 }

/* Tabs */
.tabs{ display:flex; flex-direction:row-reverse; border:1px solid #000; margin-top:8px }
.tab{
  flex:1 1 33%; appearance:none; border:0; margin:0; padding:.7em 1.1em;
  background:#fff; color:#000; cursor:pointer; font-weight:700; font-size:18px;
  border-left:1px solid #000
}
.tab:last-child{ border-left:0 }
.tab.active{ background:#000; color:#fff }
@media (min-width:1024px){ .tab{ font-size:20px } }

/* Cells (desktop/tablet) */
.grid{ font-size:0 }
.cell{
  display:inline-block; width:84px; height:84px; border:1px solid #000; margin:5px;
  background:#fff; vertical-align:top; transition:background-color .06s ease,color .06s ease
}
.glyph{
  display:flex; width:100%; height:100%; align-items:center; justify-content:center;
  color:#000; font-family:"AlteZachen Normal",system-ui,sans-serif;
  font-size:52px; line-height:1; transform:translateY(-6%); transition:transform .08s ease;
}
.cell:hover{ background:#000 }.cell:hover .glyph{ color:#fff }

/* Gaps */
.row-gap{ height:8px }
.group-gap{ height:16px }

/* ===== MOBILE (≤600px): 10 per row + tap overlay preview ===== */
@media (max-width:600px){
  .glyphs-wrap{ display:block }
  .preview-col{ display:none !important }
  .grid-col{ width:100%; max-width:none }
  .grid{ text-align:center }
  .cell{
    position:relative; margin:0; width:10%; height:auto; border:1px solid #000;
    display:inline-block; vertical-align:top; background:#fff;
  }
  .cell::before{ content:""; display:block; padding-top:100% } /* square */
  .glyph{
    position:absolute; top:0; right:0; bottom:0; left:0;
    display:flex; align-items:center; justify-content:center;
    font-size:7.2vw; transform:translateY(-4%); transition:transform .08s ease, color .06s ease;
  }
  .cell.active{ background:#ff0000 }
  .cell.active .glyph{ color:#fff; transform:translateY(-4%) scale(1.12) }
}

/* Overlay preview for mobile tap */
.touch-preview{
  position:fixed; left:0; top:0; width:0; height:0; display:none;
  border:1px solid #000; background:#fff; z-index:70;
  align-items:center; justify-content:center; box-shadow:none;
}
.tp-glyph{
  color:#000; font-family:"AlteZachen Normal",system-ui; line-height:1; transform:translateY(-2%);
}

/* ===== RED TAKEOVER (ABOUT) ===== */
.about-stage{ height:200vh }
.about-stick{ position:sticky; top:0; height:100vh; background:#ff0000; color:#fff;
  display:flex; align-items:center; justify-content:center; padding:8vw 6vw }
.about-content{
  max-width:1200px; margin:0 auto;
  font-family:"AlteZachen Normal","AlteZachen Wide",system-ui;
  font-size:7vw; line-height:1.12
}
@media (min-width:1200px){ .about-content{ font-size:72px } }

/* ===== TYPE TESTER ===== */
.tester{ position:fixed; inset:0; background:#000; color:#fff; z-index:100; display:none; overflow:auto }
.tester.open{ display:block }
.tester-bar{
  position:sticky; top:0; background:#000; padding:12px 10px;
  display:flex; align-items:center; justify-content:space-between; gap:8px; z-index:101
}
.tweights{ flex:1; display:flex; justify-content:center; gap:8px; flex-wrap:wrap }
.tbtn{
  appearance:none; cursor:pointer; font-weight:700; padding:.52em 1.0em; border:1px solid #ff0000;
  background:#ff0000; color:#fff; font-family:"AlteZachen Normal",system-ui; font-size:16px
}
.tbtn:hover{ background:#fff; color:#000; border-color:#fff }
.tweight{ border-color:#fff; background:transparent; color:#fff }
.tweight:hover{ background:#fff; color:#000; border-color:#fff }
.tester-text{
  outline:none; border:0; width:100%;
  font-family:"AlteZachen Normal",system-ui;
  font-size:10vw; line-height:.92; text-align:center;
  white-space:pre-wrap; word-break:break-word; color:#fff;
  margin:6vh auto 10vh; padding:0 12px;
}
@media (min-width:1200px){ .tester-text{ font-size:170px } }
</style>
</head>
<body>

<!-- HEADER -->
<header class="site-head" id="siteHead">
  <div class="head-wrap">
    <button class="btn" id="buyTop">רכישה</button>
    <button class="btn" id="openTester">טסטר</button>
  </div>
</header>

<!-- HERO -->
<section class="section red hero" id="hero">
  <div class="wrap">
    <h1 class="huge" style="font-family:'AlteZachen Wide','AlteZachen Normal'">אלטע זאכן</h1>
    <div class="huge" style="font-family:'AlteZachen Wide','AlteZachen Normal'">ALTE ZACHEN</div>
  </div>
</section>

<!-- NORMAL -->
<section class="section white spec">
  <div class="wrap">
    <div class="weight" style="font-family:'AlteZachen Normal'">נורמל</div>
    <div class="big"  style="font-family:'AlteZachen Normal'">מחמם</div>
    <div class="mid"  style="font-family:'AlteZachen Normal'">אתה שומר על בריאותך בהשתמשך במים מינרליים מצוינים ומעולים, סחטיין!</div>
  </div>
</section>

<!-- HALF-WIDE -->
<section class="section white spec">
  <div class="wrap">
    <div class="weight" style="font-family:'AlteZachen HalfWide'">חצי־רחב</div>
    <div class="big" style="font-family:'AlteZachen HalfWide'">קונים/מוכרים/</div>
    <div class="big" style="font-family:'AlteZachen HalfWide'">הכל בזזזזזזול!</div>
  </div>
</section>

<!-- WIDE (LTR) -->
<section class="section white spec" dir="ltr">
  <div class="wrap">
    <div class="weight" style="font-family:'AlteZachen Wide'">רחב</div>
    <div class="mid"  style="font-family:'AlteZachen Wide'">
      IN 1920, MANDATORY PALESTINE (פלשתינה/ישראל) WAS ESTABLISHED UNDER BRITISH MANDATE, LEADING TO VARIOUS FLAG DESIGNS.
    </div>
  </div>
</section>

<!-- RANDOM -->
<section class="section white spec">
  <div class="wrap">
    <div class="weight" style="font-family:'AlteZachen Random'">רנדום</div>
    <div class="big" style="font-family:'AlteZachen Random'">אלטע זאכן — הכל בזזזזזול!</div>
  </div>
</section>

<!-- GLYPH GRID -->
<section class="section white glyphs-shell" id="glyphs">
  <div class="glyphs-wrap">
    <!-- PREVIEW LEFT (hidden on mobile ≤600px) -->
    <div class="preview-col">
      <div class="preview-box"><div id="bigGlyph" class="preview-glyph" aria-live="polite">א</div></div>
      <div class="preview-meta"><span id="glyphName">HEBREW LETTER ALEF</span><span id="glyphCode">U+05D0</span></div>
      <div class="tabs" role="tablist" aria-label="Weights">
        <button class="tab"        data-face="AlteZachen Wide"     style="font-family:'AlteZachen Wide'">רחב</button>
        <button class="tab"        data-face="AlteZachen HalfWide" style="font-family:'AlteZachen HalfWide'">חצי־רחב</button>
        <button class="tab active" data-face="AlteZachen Normal"   style="font-family:'AlteZachen Normal'">נורמל</button>
      </div>
    </div>
    <!-- GRID RIGHT -->
    <div class="grid-col" id="glyphRows"></div>
  </div>
</section>

<!-- RED TAKEOVER -->
<section class="about-stage" id="about">
  <div class="about-stick">
    <div class="about-content">
      אלטע זאכן הוא פונט עברי בהשראת לטרינג וכרזות מודפסות משנות ה־30 וה־40, תקופה שבה עוצבה השפה
      החזותית של היישוב העברי בארץ ישראל. הפונט שואב השראה מלטרינג שצויר במיוחד עבור כרזות תרבות, אירועים ומוסדות.
      שלושה משקלים — נורמל, חצי־רחב, רחב — ולצידם “רנדום” שמוסיף טקסטורה של לטרינג ידני.
    </div>
  </div>
</section>

<!-- TYPE TESTER -->
<div class="tester" id="tester" aria-hidden="true">
  <div class="tester-bar">
    <button class="tbtn" id="buyInside">רכישה</button>
    <div class="tweights" id="testerWeights">
      <button class="tbtn tweight" data-face="AlteZachen Normal"  style="font-family:'AlteZachen Normal'">נורמל</button>
      <button class="tbtn tweight" data-face="AlteZachen HalfWide"style="font-family:'AlteZachen HalfWide'">חצי־רחב</button>
      <button class="tbtn tweight" data-face="AlteZachen Wide"    style="font-family:'AlteZachen Wide'">רחב</button>
      <button class="tbtn tweight" data-face="AlteZachen Random"  style="font-family:'AlteZachen Random'">רנדום</button>
    </div>
    <button class="tbtn" id="closeTester">סגירה</button>
  </div>
  <div id="testerText" class="tester-text" contenteditable="true" spellcheck="false">סברינה קרפנטר המלכה!!!1</div>
</div>

<!-- Mobile tap preview overlay -->
<div class="touch-preview" id="touchPreview" aria-hidden="true"><div class="tp-glyph" id="tpGlyph">א</div></div>

<script>
/* ===== HEADER after HERO ===== */
(function(){
  var head=document.getElementById('siteHead');
  var hero=document.getElementById('hero');
  function sync(){
    var cutoff=0;
    if(hero){ cutoff=hero.offsetTop+hero.offsetHeight-1; }
    if(window.pageYOffset>cutoff){
      if(head.className.indexOf('show')===-1) head.className+=' show';
    } else {
      head.className=head.className.replace(' show','');
    }
  }
  window.addEventListener('scroll',sync,false);
  window.addEventListener('resize',sync,false);
  document.addEventListener('DOMContentLoaded',sync,false);
})();

/* ===== GLYPH DATA ===== */
var ROW_HEB_1="אבגדהוזחטיכךלמםנןסעפףצץקרשת";
var ROW_HEB_PRES_1="אַ אָ אּ בּ גּ דּ הּ וּ וֹ זּ טּ יּ ךּ כּ לּ מּ נּ סּ ףּ פּ צּ קּ רּ שּ שׁ שׂ שּׁ שּׂ תּ";
var ROW_LAT_AZ="ABCDEFGHIJKLMNOPQRSTUVWXYZ";
var ROW_LAT_EXT_1="Á Ă Â Ä À Ā Å Ã Æ Ć Ç Č Ď Đ É Ě Ê Ë È Ē Ė Ə Ğ Ġ Ģ Ĥ";
var ROW_LAT_EXT_2="Í Ĭ Î Ï Ì İ Į Ĵ Ķ Ĺ Ľ Ł Ń Ň Ñ Ŋ Ó Ô Ö Ò Ō Õ Œ Þ Ŕ Ř Ŗ Ś Ş Ș ß Ť Ţ Ú Û Ü Ù Ū Ů Ű Ų Ŵ Ŷ Ÿ Ý Ź Ž Ż Ǐ Ĺ Ń";
var ROW_CYR_1="А Б В Г Д Е Ё Ж З И Й К Л М Н О П Р С Т У Ф Х Ц Ч Ш Щ Ъ Ы Ь Э Ю Я Є Ї І Ґ";
var ROW_NUM_1="0 1 2 3 4 5 6 7 8 9";
var ROW_NUM_2="0 1 2 3 4 5 6 7 8 9";
var ROW_NUM_SS03="0 1 2 3 4 5 6 7 8 9";
var ROW_NUM_SS04="0 1 2 3 4 5 6 7 8 9";
var ROW_FRAC="½ ¼ ¾ ⅜ ⅝ ⅞";
var ROW_CURR="¢ ₳ $ € ₱ ₪ £ ¥";
var ROW_PUNC_1=". , ; : … ! ? ¿ • * # / \\ – — ― _ ( ) { } [ ] „ “ ” « » ‹ › ‚ ‘ ’";
var ROW_SYM_1 ="☺ ☹ @ & ¶ © ® ℗ ™ ° | ¦";
var ROW_SHAPES="■ □ ▲ ▶ ▼ ◀ △ ◯ ●";
var ROW_ARROWS="↺ ↗ ↖ ↘ ↙ ↓ ↑ → ← ⇔ ⇕ ⇑ ⇓ ⇐ ⇒ ⇌ ⇅";
var ROW_MATH="− × ÷ = ≠ > < ≥ ≤ ± ≈ ~ ¬ ∅ % ‰";

var HEB_NAMES={"א":"HEBREW LETTER ALEF","ב":"HEBREW LETTER BET","ג":"HEBREW LETTER GIMEL","ד":"HEBREW LETTER DALET","ה":"HEBREW LETTER HE","ו":"HEBREW LETTER VAV","ז":"HEBREW LETTER ZAYIN","ח":"HEBREW LETTER HET","ט":"HEBREW LETTER TET","י":"HEBREW LETTER YOD","כ":"HEBREW LETTER KAF","ך":"HEBREW LETTER FINAL KAF","ל":"HEBREW LETTER LAMED","מ":"HEBREW LETTER MEM","ם":"HEBREW LETTER FINAL MEM","נ":"HEBREW LETTER NUN","ן":"HEBREW LETTER FINAL NUN","ס":"HEBREW LETTER SAMEKH","ע":"HEBREW LETTER AYIN","פ":"HEBREW LETTER PE","ף":"HEBREW LETTER FINAL PE","צ":"HEBREW LETTER TSADI","ץ":"HEBREW LETTER FINAL TSADI","ק":"HEBREW LETTER QOF","ר":"HEBREW LETTER RESH","ש":"HEBREW LETTER SHIN","ת":"HEBREW LETTER TAV"};
var SYM_NAMES={"₪":"NEW SHEQEL SIGN","€":"EURO SIGN","£":"POUND SIGN","¥":"YEN SIGN","$":"DOLLAR SIGN","¢":"CENT SIGN","₳":"AUSTRAL SIGN","₱":"PESO SIGN","©":"COPYRIGHT SIGN","®":"REGISTERED SIGN","℗":"SOUND RECORDING COPYRIGHT","™":"TRADE MARK SIGN","°":"DEGREE SIGN","¶":"PILCROW SIGN","¦":"BROKEN BAR","·":"MIDDLE DOT"};
function nameOf(ch){
  if(HEB_NAMES[ch])return HEB_NAMES[ch];
  if(SYM_NAMES[ch])return SYM_NAMES[ch];
  var cp=(ch&&ch.codePointAt)?ch.codePointAt(0):(ch&&ch.charCodeAt)?ch.charCodeAt(0):0;
  if(ch>='A'&&ch<='Z')return"LATIN CAPITAL LETTER "+ch;
  if(ch>='a'&&ch<='z')return"LATIN SMALL LETTER "+ch.toUpperCase();
  if(ch>='0'&&ch<='9')return"DIGIT "+ch;
  var hex=cp.toString(16).toUpperCase(); while(hex.length<4)hex="0"+hex; return "U+"+hex;
}
function codeOf(ch){
  var cp=(ch&&ch.codePointAt)?ch.codePointAt(0):(ch&&ch.charCodeAt)?ch.charCodeAt(0):0;
  var hex=cp.toString(16).toUpperCase(); while(hex.length<4)hex="0"+hex; return "U+"+hex;
}

var currentFace="AlteZachen Normal";
var rowsRoot=document.getElementById('glyphRows');
var bigGlyph=document.getElementById('bigGlyph');
var glyphName=document.getElementById('glyphName');
var glyphCode=document.getElementById('glyphCode');

/* build a row */
function makeRow(charsString, featureSettings){
  var grid=document.createElement('div'); grid.className='grid';
  for(var i=0;i<charsString.length;i++){
    var ch=charsString[i];
    if(ch===" "||ch==="\n"||ch==="\t") continue;
    var cell=document.createElement('div'); cell.className='cell';
    var span=document.createElement('span'); span.className='glyph';
    span.style.fontFamily='"'+currentFace+'", system-ui, sans-serif';
    if(featureSettings) span.style.fontFeatureSettings=featureSettings;
    span.appendChild(document.createTextNode(ch));
    cell.appendChild(span);
    /* desktop hover -> left preview */
    cell.onmouseenter=(function(c,fs){return function(){showGlyph(c,fs)}})(ch,featureSettings);
    grid.appendChild(cell);
  }
  rowsRoot.appendChild(grid);
}
function gap(kind){
  var d=document.createElement('div'); d.className=(kind==='group'?'group-gap':'row-gap'); rowsRoot.appendChild(d);
}
function showGlyph(ch, featureSettings){
  if(bigGlyph){
    bigGlyph.innerHTML=""; bigGlyph.appendChild(document.createTextNode(ch));
    bigGlyph.style.fontFamily='"'+currentFace+'","AlteZachen Wide",system-ui';
    bigGlyph.style.fontFeatureSettings=featureSettings?featureSettings:"normal";
  }
  if(glyphName) glyphName.innerHTML=nameOf(ch);
  if(glyphCode) glyphCode.innerHTML=codeOf(ch);
}
function rebuildFaces(){
  var gs=rowsRoot.querySelectorAll('.glyph');
  for(var i=0;i<gs.length;i++){ gs[i].style.fontFamily='"'+currentFace+'", system-ui, sans-serif'; }
  if(bigGlyph){
    var fs=bigGlyph.style.fontFeatureSettings||"normal";
    bigGlyph.style.fontFamily='"'+currentFace+'","AlteZachen Wide",system-ui';
    bigGlyph.style.fontFeatureSettings=fs;
  }
}

/* Build once */
(function(){
  makeRow(ROW_HEB_1); gap('row');
  makeRow(ROW_HEB_PRES_1); gap('group');

  makeRow(ROW_LAT_AZ); gap('row');
  makeRow(ROW_LAT_EXT_1); gap('row');
  makeRow(ROW_LAT_EXT_2); gap('group');

  makeRow(ROW_CYR_1); gap('group');

  makeRow(ROW_NUM_1); gap('row');
  makeRow(ROW_NUM_2); gap('row');
  makeRow(ROW_NUM_SS03, '"ss03" 1'); gap('row');
  makeRow(ROW_NUM_SS04, '"ss04" 1'); gap('group');

  makeRow(ROW_FRAC); gap('row');
  makeRow(ROW_CURR); gap('group');
  makeRow(ROW_PUNC_1); gap('row');
  makeRow(ROW_SYM_1); gap('group');
  makeRow(ROW_SHAPES); gap('group');
  makeRow(ROW_ARROWS); gap('group');
  makeRow(ROW_MATH);

  showGlyph('א');
})();

/* Tabs */
(function(){
  var tabs=document.querySelectorAll('.tabs .tab');
  var i; for(i=0;i<tabs.length;i++){
    tabs[i].addEventListener('click', function(){
      var j; for(j=0;j<tabs.length;j++) tabs[j].classList.remove('active');
      this.classList.add('active');
      currentFace=this.getAttribute('data-face');
      rebuildFaces();
    }, false);
  }
})();

/* ===== Mobile: tap to enlarge + floating white preview box ===== */
(function(){
  var overlay=document.getElementById('touchPreview');
  var overlayGlyph=document.getElementById('tpGlyph');

  function isMobile(){ return window.matchMedia && window.matchMedia('(max-width: 600px)').matches; }

  function hideOverlay(){
    overlay.style.display='none';
    overlay.setAttribute('aria-hidden','true');
    var act=rowsRoot.querySelector('.cell.active'); if(act) act.classList.remove('active');
  }

  function onTap(e){
    if(!isMobile()) return;
    var t=e.target;
    while(t && t!==rowsRoot && !t.classList.contains('cell')) t=t.parentNode;
    if(!t || t===rowsRoot) return;

    // toggle active cell
    var active=rowsRoot.querySelector('.cell.active');
    if(active && active!==t) active.classList.remove('active');
    var nowActive=!t.classList.contains('active');
    if(!nowActive){ t.classList.remove('active'); hideOverlay(); return; }
    t.classList.add('active');

    // glyph + features
    var g=t.querySelector('.glyph');
    var ch=g && g.textContent ? g.textContent.charAt(0) : '';
    overlayGlyph.textContent=ch;
    overlayGlyph.style.fontFamily='"'+currentFace+'", system-ui';
    overlayGlyph.style.fontFeatureSettings=g.style.fontFeatureSettings||'normal';

    // size & position (≈ 2.6× תא)
    var r=t.getBoundingClientRect();
    var cellSize=r.width;
    var size=Math.min(window.innerWidth*0.62, cellSize*2.6);
    var left=r.left + r.width/2 - size/2;
    var top =r.top  + r.height/2 - size/2;
    // clamp into viewport
    if(left<6) left=6; if(top<6) top=6;
    if(left+size>window.innerWidth-6) left=window.innerWidth-size-6;
    if(top +size>window.innerHeight-6) top =window.innerHeight-size-6;

    overlay.style.width=size+'px';
    overlay.style.height=size+'px';
    overlay.style.left=left+'px';
    overlay.style.top=top+'px';
    overlay.style.display='flex';
    overlay.setAttribute('aria-hidden','false');

    // font-size inside box
    overlayGlyph.style.fontSize=(size*0.72)+'px';
  }

  function bind(){
    if(isMobile()){
      rowsRoot.addEventListener('click', onTap, false);
      rowsRoot.addEventListener('touchstart', onTap, {passive:true});
      window.addEventListener('scroll', hideOverlay, false);
    }else{
      rowsRoot.removeEventListener('click', onTap, false);
      rowsRoot.removeEventListener('touchstart', onTap, false);
      window.removeEventListener('scroll', hideOverlay, false);
      hideOverlay();
    }
  }

  document.addEventListener('click', function(e){
    if(!isMobile()) return;
    var t=e.target;
    var insideCell=false;
    while(t){ if(t.classList && t.classList.contains('cell')) { insideCell=true; break; } t=t.parentNode; }
    if(!insideCell){ hideOverlay(); }
  }, false);

  window.addEventListener('resize', bind, false);
  document.addEventListener('DOMContentLoaded', bind, false);
  bind();
})();

/* ===== TYPE TESTER ===== */
(function(){
  var tester=document.getElementById('tester');
  var open=document.getElementById('openTester');
  var close=document.getElementById('closeTester');
  if(open){ open.onclick=function(){ tester.classList.add('open'); tester.setAttribute('aria-hidden','false'); }; }
  if(close){ close.onclick=function(){ tester.classList.remove('open'); tester.setAttribute('aria-hidden','true'); }; }
  document.addEventListener('keydown',function(e){ if(e.key==='Escape'){ tester.classList.remove('open'); tester.setAttribute('aria-hidden','true'); }},false);
  var weights=document.getElementById('testerWeights').getElementsByTagName('button');
  var tText=document.getElementById('testerText');
  for(var k=0;k<weights.length;k++){
    weights[k].onclick=function(){ tText.style.fontFamily='"'+this.getAttribute('data-face')+'", system-ui'; };
  }
  var buyTop=document.getElementById('buyTop');
  var buyInside=document.getElementById('buyInside');
  if(buyTop)buyTop.onclick=function(){ alert('רכישה — חבר לינק כשיהיה'); };
  if(buyInside)buyInside.onclick=function(){ alert('רכישה — חבר לינק כשיהיה'); };
})();
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>אלטע זאכן — Specimen</title>

<!-- ===== FONTS (root) ===== -->
<style>
@font-face{
  font-family:"AlteZachen-Normal";
  src:url("AlteZachen-Normal.woff2") format("woff2"),
      url("AlteZachen-Normal.woff") format("woff"),
      url("AlteZachen-Normal.otf") format("opentype");
  font-display:swap;
}
@font-face{
  font-family:"AlteZachen-HalfWide";
  src:url("AlteZachen-HalfWide.woff2") format("woff2"),
      url("AlteZachen-HalfWide.woff") format("woff"),
      url("AlteZachen-HalfWide.otf") format("opentype");
  font-display:swap;
}
@font-face{
  font-family:"AlteZachen-Wide";
  src:url("AlteZachen-Wide.woff2") format("woff2"),
      url("AlteZachen-Wide.woff") format("woff"),
      url("AlteZachen-Wide.otf") format("opentype");
  font-display:swap;
}
@font-face{
  font-family:"AlteZachen-Random";
  src:url("AlteZachen-Random.woff2") format("woff2"),
      url("AlteZachen-Random.woff") format("woff"),
      url("AlteZachen-Random.otf") format("opentype");
  font-display:swap;
}

/* ===== Base ===== */
:root{
  --red:#ff0000;
  --grey:#f4f6f8; /* בהיר יותר */
  --black:#000;
  --page-max:1400px;
}
html,body{margin:0;background:#fff;color:#000}
body{font-family:"AlteZachen-Normal", system-ui, -apple-system, Segoe UI, Arial, sans-serif}

/* ===== Sticky header ===== */
.site-header{
  position:sticky; top:-1px; z-index:50;
  background:var(--red); border-bottom:1px solid #000;
  padding:8px 10px; display:flex; align-items:center; justify-content:flex-end;
}
.site-header .logo-link{display:inline-flex; align-items:center}
.site-header img{height:28px; width:auto; display:block;}

/* ===== HERO אדום ===== */
.hero-red{background:var(--red);}
.hero-wrap{
  max-width:min(92vw, var(--page-max));
  margin-inline:auto;
  padding-block:min(6vh,80px) min(8vh,120px);
}
.hero-img{
  display:block; margin:0 auto;
  width:min(88vw, 1400px); height:auto; object-fit:contain;
}

/* ===== WHITE SECTION ===== */
.white{background:#fff; padding:min(6vh,80px) clamp(12px,4vw,40px);}

/* ===== One DINAMO-like tester ===== */
.tester{
  background:var(--grey);
  border-radius:14px;
  box-shadow: inset 0 0 0 1px #e2e6ea;
  padding: clamp(10px, 2vw, 18px);
  margin-block: clamp(18px, 4vw, 44px);
}
.tester .tt-controls{
  display:flex; gap: clamp(8px,1.2vw,16px);
  align-items:center; justify-content:space-between;
  flex-wrap:wrap; margin-bottom: clamp(8px,1.6vw,18px);
}
.tester .tt-weights{display:flex; gap:8px; flex-wrap:wrap}

/* כפתורי משקלים — HalfWide */
.tester .tt-btn{
  font-family:"AlteZachen-HalfWide", system-ui, sans-serif;
  font-size: clamp(12px,1.25vw,16px);
  line-height:1;
  padding:8px 10px;
  border-radius:8px;
  background:#fff; color:#000;
  border:1px solid #000; cursor:pointer;
}
.tester .tt-btn.active{background:var(--red); color:#fff; border-color:var(--red);}

/* סליידר קצר יותר — קו שחור דק + עיגול שחור */
.tester .tt-slider{display:flex; align-items:center; gap:10px}
.tester input[type="range"]{
  width:min(30vw, 300px); /* קצר יותר */
  -webkit-appearance:none; appearance:none; background:transparent;
}
.tester input[type="range"]::-webkit-slider-runnable-track{height:2px;background:#000;border-radius:2px}
.tester input[type="range"]::-moz-range-track{height:2px;background:#000;border-radius:2px}
.tester input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:16px;height:16px;border-radius:50%;background:#000;border:0;margin-top:-7px}
.tester input[type="range"]::-moz-range-thumb{width:16px;height:16px;border-radius:50%;background:#000;border:0}

/* קנבס — למלא את הרוחב תמיד, בלי עמודות */
.tester .tt-canvas{
  --f: 180px;
  font-size: var(--f);
  line-height: 0.92;
  font-family: "AlteZachen-Random", system-ui, sans-serif;
  color:#000; background:var(--grey); border-radius:10px;

  padding-inline: clamp(6px,1.2vw,10px);
  padding-block: clamp(8px,1.5vw,14px);

  /* למלא רוחב שורה אחת */
  white-space: nowrap;
  overflow: hidden;           /* לא לשבור שורה; ננהל גובה בנפרד */
  display:block;
}

/* גובה ברירת־מחדל + גדילה קטנה לפי הסליידר */
.tester .tt-shell{
  min-height:24vh;            /* בסיס */
  max-height:34vh;            /* יעלה עם הסליידר */
  overflow:auto;              /* גלילה פנימית אם צריך */
}

@media (max-width: 700px){
  .site-header img{height:24px}
  .hero-wrap{padding-block:40px 56px}
  .tester .tt-shell{min-height:30vh; max-height:40vh}
}
</style>
</head>
<body>

<!-- ===== HEADER ===== -->
<header class="site-header" aria-label="Header">
  <a class="logo-link" href="https://hafontia.com" target="_blank" rel="noopener">
    <img src="logoheader.webp" alt="הפונטיה — לינק" />
  </a>
</header>

<!-- ===== HERO ===== -->
<section class="hero-red" aria-label="Hero">
  <div class="hero-wrap">
    <picture>
      <source src="hero2.webp" type="image/webp" />
      <img class="hero-img" src="Asset 1.webp" alt="אלטע זאכן — ראש העמוד" />
    </picture>
  </div>
</section>

<!-- ===== MAIN ===== -->
<main class="white" aria-label="Main">

  <!-- Tester אחד -->
  <section class="tester" data-default-font="AlteZachen-Random">
    <div class="tt-controls">
      <div class="tt-weights">
        <button class="tt-btn" data-font="AlteZachen-Normal">נורמל</button>
        <button class="tt-btn" data-font="AlteZachen-HalfWide">חצי־רחב</button>
        <button class="tt-btn" data-font="AlteZachen-Wide">רחב</button>
        <button class="tt-btn active" data-font="AlteZachen-Random">רנדום</button>
      </div>
      <div class="tt-slider">
        <input type="range" min="0" max="100" step="1" value="50" />
      </div>
    </div>

    <div class="tt-shell">
      <div class="tt-canvas" contenteditable="true">אלטע זאכן</div>
    </div>
  </section>

</main>

<!-- ===== JS ===== -->
<script>
(function(){
  const tester = document.querySelector('.tester');
  if(!tester) return;

  const range   = tester.querySelector('input[type="range"]');
  const shell   = tester.querySelector('.tt-shell');
  const canvas  = tester.querySelector('.tt-canvas');
  const buttons = tester.querySelectorAll('.tt-btn');
  const defFont = tester.getAttribute('data-default-font') || 'AlteZachen-Random';

  // baseline לגודל עבור 4 תווים — שלא נגדל מעבר לזה כשיש פחות מ-4
  let sizeForFour = null;

  canvas.style.fontFamily = `"${defFont}", system-ui, sans-serif`;
  buttons.forEach(b=>{
    b.classList.toggle('active', b.dataset.font === defFont);
    b.addEventListener('click', ()=>{
      buttons.forEach(x=>x.classList.remove('active'));
      b.classList.add('active');
      canvas.style.fontFamily = `"${b.dataset.font}", system-ui, sans-serif`;
      fitText();
    });
  });

  // הסליידר שולט רק על מקס-גובה (מאפשר לגדול קצת מטה)
  const applyMaxHeight = () =>{
    const minH = getComputedStyle(shell).getPropertyValue('--minH');
    // נבחר סקאלה פשוטה בין min/max הקיימים ב-CSS
    const isMobile = window.matchMedia('(max-width:700px)').matches;
    const baseMin = isMobile ? 30 : 24; // vh
    const baseMax = isMobile ? 40 : 34; // vh
    const t = +range.value / 100;       // 0..1
    const vh = Math.round(baseMin + (baseMax-baseMin)*t);
    shell.style.maxHeight = vh + 'vh';
  };
  applyMaxHeight();
  range.addEventListener('input', applyMaxHeight);

  // פונקציה שמתאימה את גודל הפונט כדי למלא את כל הרוחב
  function fitText(){
    const txt = canvas.textContent.trim() || 'אלטע זאכן';
    const len = [...txt].length;

    // גבולות לחיפוש בינארי
    const min = 24;        // לא נרד מתחת
    const max = 720;       // תקרה סבירה
    const padInline = parseFloat(getComputedStyle(canvas).paddingInlineStart) +
                      parseFloat(getComputedStyle(canvas).paddingInlineEnd);
    const target = canvas.clientWidth - padInline;

    // מכשיר עזר למדידה
    const meas = document.createElement('span');
    meas.style.whiteSpace = 'nowrap';
    meas.style.visibility = 'hidden';
    meas.style.position = 'absolute';
    meas.style.pointerEvents = 'none';
    meas.style.fontFamily = getComputedStyle(canvas).fontFamily;
    meas.style.letterSpacing = getComputedStyle(canvas).letterSpacing;
    meas.textContent = txt;
    document.body.appendChild(meas);

    // אם טרם חושב baseline ל-4 תווים – חשב פעם אחת
    if(sizeForFour === null){
      sizeForFour = computeSize('אלטע');
    }

    // חישוב הגודל המתאים לטקסט הנוכחי
    const computed = computeSize(txt);
    const finalSize = (len < 4) ? Math.min(computed, sizeForFour) : computed;

    canvas.style.setProperty('--f', finalSize + 'px');

    document.body.removeChild(meas);

    function computeSize(sample){
      let lo=min, hi=max, best=min;
      meas.textContent = sample;
      while(lo<=hi){
        const mid = Math.floor((lo+hi)/2);
        meas.style.fontSize = mid+'px';
        const w = meas.getBoundingClientRect().width;
        if(w<=target){ best=mid; lo=mid+1; } else { hi=mid-1; }
      }
      return best;
    }
  }

  // טריגרים
  fitText();
  window.addEventListener('resize', fitText);
  canvas.addEventListener('input', fitText);
})();
</script>

</body>
</html>
